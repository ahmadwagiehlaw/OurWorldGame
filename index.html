<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø¹Ø§Ù„Ù…Ù†Ø§ Ø§Ù„Ø®Ø§Øµ</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#fff0f5">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-gradient: linear-gradient(135deg, #fff0f5 0%, #ffe4e1 100%);
            --card-bg: rgba(255, 255, 255, 0.9);
            --primary: #d63384;
            --primary-soft: #ff8fa3;
            --text-main: #4a4a4a;
            --text-light: #777;
            --gold: #c5a059;
            --shadow: 0 10px 30px rgba(214, 51, 132, 0.15);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }
        
        body {
            background: var(--bg-gradient);
            color: var(--text-main);
            font-family: 'Cairo', sans-serif;
            margin: 0; padding: 0; overflow-x: hidden;
            display: flex; flex-direction: column; min-height: 100vh;
        }

        /* Header */
        header {
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            backdrop-filter: blur(10px);
            position: sticky; top: 0; z-index: 100;
            border-bottom-left-radius: 20px; border-bottom-right-radius: 20px;
        }

        .top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        
        h1 { 
            margin: 0; font-family: 'Dancing Script', cursive; font-size: 1.8rem; 
            background: linear-gradient(to right, #d63384, #c5a059);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        .header-icons { display: flex; gap: 10px; align-items: center; }
        .icon-btn { background: none; border: none; font-size: 1.4rem; cursor: pointer; color: var(--primary); }

        /* Scoreboard */
        .scoreboard {
            display: flex; justify-content: space-between; align-items: center;
            background: white; padding: 10px 20px; border-radius: 50px;
            box-shadow: var(--shadow); margin-top: 5px;
        }
        .score-box { 
            text-align: center; width: 40%; position: relative; cursor: pointer; transition: 0.3s; 
            padding: 5px; border-radius: 15px;
        }
        .score-box:active { background-color: #f0f0f0; }
        
        /* Turn Indicator */
        .score-box.active-turn::after {
            content: 'Ø§Ù„Ø¯ÙˆØ± Ø¹Ù„ÙŠÙƒ'; position: absolute; bottom: -18px; left: 50%; transform: translateX(-50%);
            font-size: 0.7rem; background: var(--primary); color: white; padding: 2px 8px; border-radius: 10px;
            white-space: nowrap; animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .score-box.active-turn .score-val { color: var(--primary); transform: scale(1.1); }
        .score-box .score-val { transition: 0.3s; color: #ccc; }

        .score-val { font-size: 1.4rem; font-weight: 800; }
        .score-label { font-size: 0.8rem; color: var(--text-light); font-weight: bold; }

        /* Safe Mode Switch */
        .safe-switch { position: relative; width: 46px; height: 24px; }
        .safe-switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
            background-color: #ccc; transition: .4s; border-radius: 34px;
        }
        .slider:before {
            position: absolute; content: "ğŸ¤"; display:flex; justify-content:center; align-items:center; 
            font-size: 10px; height: 18px; width: 18px; left: 3px; bottom: 3px;
            background-color: white; transition: .4s; border-radius: 50%; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        input:checked + .slider { background-color: var(--primary-soft); }
        input:checked + .slider:before { transform: translateX(22px); content: "ğŸ”¥"; }

        /* Main Content */
        main { flex: 1; padding: 20px; padding-bottom: 90px; text-align: center; overflow-y: auto; }

        .module { display: none; animation: fadeIn 0.6s ease-out; }
        .module.active { display: block; }

        /* Wheel */
        .wheel-container {
            position: relative; width: 280px; height: 280px; margin: 30px auto;
            border-radius: 50%; border: 8px solid white; 
            box-shadow: 0 0 0 4px var(--primary-soft), var(--shadow);
            overflow: hidden; transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99);
        }
        .wheel-arrow {
            position: absolute; top: -20px; left: 50%; transform: translateX(-50%);
            z-index: 10; width: 40px; height: 40px; background: white;
            clip-path: polygon(50% 100%, 0 0, 100% 0);
            filter: drop-shadow(0 4px 4px rgba(0,0,0,0.1));
        }
        .wheel-inner { width: 100%; height: 100%; background: conic-gradient(from 0deg, #ffdde1 0%, #ee9ca7 100%); border-radius: 50%; }

        /* Cards */
        .level-selector { display: flex; gap: 8px; justify-content: center; margin-bottom: 25px; }
        .lvl-btn {
            padding: 8px 16px; background: white; border: none;
            color: var(--text-light); border-radius: 20px; font-size: 0.85rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05); transition: 0.3s;
        }
        .lvl-btn.active { background: var(--primary); color: white; font-weight: bold; box-shadow: 0 5px 15px rgba(214, 51, 132, 0.4); }
        .lvl-btn.locked { opacity: 0.6; background: #eee; }

        .card-display {
            background: white; border-radius: 25px; padding: 40px 25px; min-height: 280px;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            margin: 10px 0; box-shadow: var(--shadow); position: relative; overflow: hidden;
        }
        .card-display::before {
            content: 'â¤ï¸'; position: absolute; font-size: 10rem; opacity: 0.05; color: var(--primary); z-index: 0;
        }
        .card-text { font-size: 1.2rem; line-height: 1.7; color: #333; z-index: 1; font-weight: 600; }
        .card-type { color: var(--primary); font-size: 0.8rem; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 15px; z-index: 1;}

        /* Dice */
        .dice-area { display: flex; justify-content: center; gap: 20px; margin: 50px 0; }
        .die {
            width: 110px; height: 110px; background: white; border-radius: 20px;
            display: flex; justify-content: center; align-items: center;
            font-size: 1.1rem; font-weight: bold; color: var(--primary);
            box-shadow: var(--shadow); border: 2px solid #fff0f5;
        }

        /* Buttons */
        .action-btn {
            background: linear-gradient(45deg, var(--primary), #ff8fa3);
            color: white; border: none; padding: 16px 45px; border-radius: 50px;
            font-size: 1.1rem; font-weight: bold; cursor: pointer;
            box-shadow: 0 10px 25px rgba(214, 51, 132, 0.4);
            margin-top: 25px; width: 85%; transition: transform 0.2s;
        }
        .action-btn:active { transform: scale(0.96); }
        .action-btn:disabled { opacity: 0.7; cursor: not-allowed; filter: grayscale(1); }
        
        .action-row { display: flex; gap: 15px; width: 90%; margin: 20px auto 0; }
        .action-row .action-btn { width: 50%; margin-top: 0; font-size: 1rem; }

        .joker-btn {
            background: white; color: var(--gold); border: 2px solid var(--gold);
            padding: 8px 20px; border-radius: 20px; font-size: 0.9rem; margin-top: 20px;
            font-weight: bold;
        }

        /* Nav */
        nav {
            position: fixed; bottom: 20px; left: 20px; right: 20px;
            background: white; border-radius: 25px; padding: 15px;
            display: flex; justify-content: space-around;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1); z-index: 99;
        }
        .nav-btn {
            background: none; border: none; color: #ccc; font-size: 1.5rem;
            transition: 0.3s; position: relative;
        }
        .nav-btn.active { color: var(--primary); transform: translateY(-5px); }
        .nav-btn.active::after {
            content: ''; position: absolute; bottom: -5px; left: 50%; transform: translateX(-50%);
            width: 5px; height: 5px; background: var(--primary); border-radius: 50%;
        }

        /* Modal */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); backdrop-filter: blur(5px);
            z-index: 1000; display: none; justify-content: center; align-items: center;
        }
        .modal-content {
            background: white; width: 90%; max-height: 80vh; overflow-y: auto;
            border-radius: 25px; padding: 25px; text-align: right;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2); animation: slideUp 0.4s;
        }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        .modal-title { font-weight: bold; color: var(--primary); font-size: 1.2rem; }
        .close-btn { background: #eee; border: none; width: 30px; height: 30px; border-radius: 50%; font-weight: bold; cursor: pointer; }
        .rule-block { margin-bottom: 15px; }
        .rule-title { font-weight: bold; color: #333; margin-bottom: 5px; }
        .rule-desc { color: #666; font-size: 0.9rem; line-height: 1.6; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes popIn { from { transform: translateX(-50%) scale(0); } to { transform: translateX(-50%) scale(1); } }
        .shake { animation: shake 0.5s; }
        @keyframes shake { 0%, 100% {transform: translateX(0);} 25% {transform: translateX(-5px) rotate(-5deg);} 75% {transform: translateX(5px) rotate(5deg);} }

    </style>
</head>
<body>

    <header>
        <div class="top-bar">
            <h1>Our Private World</h1>
            <div class="header-icons">
                <label class="safe-switch">
                    <input type="checkbox" id="modeToggle" onchange="toggleMode()">
                    <span class="slider"></span>
                </label>
                <button class="icon-btn" onclick="openHelp()">â„¹ï¸</button>
            </div>
        </div>
        
        <div class="scoreboard">
            <div class="score-box active-turn" id="box-p1" onclick="manualAdd(1)">
                <div class="score-val" id="score1">0</div>
                <div class="score-label">AHMED</div>
            </div>
            
            <div style="font-size: 1.2rem; color: #ddd;">vs</div>
            
            <div class="score-box" id="box-p2" onclick="manualAdd(2)">
                <div class="score-val" id="score2">0</div>
                <div class="score-label">LULU</div>
            </div>
        </div>
        <div id="reward-msg" style="text-align:center; color: var(--gold); font-size: 0.85rem; margin-top:8px; min-height: 20px; font-weight:600;"></div>
    </header>

    <main>
        <div id="mod-wheel" class="module active">
            <h2 style="color:var(--text-main); margin-bottom:0;">Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸</h2>
            <p style="color:var(--text-light); font-size:0.9rem; margin-top:5px;">Ø§Ù„Ø¯ÙˆØ± Ø¹Ù„Ù‰: <span class="current-player-name" style="color:var(--primary); font-weight:bold;">Ø£Ø­Ù…Ø¯</span></p>
            
            <div class="wheel-container" id="wheel">
                <div class="wheel-arrow"></div>
                <div class="wheel-inner">
                    <div style="display:flex; height:100%; justify-content:center; align-items:center;">
                        <span style="font-size:4rem; filter: grayscale(100%) brightness(200%);">ğŸŒ¸</span>
                    </div>
                </div>
            </div>
            
            <div id="wheel-result" style="min-height: 50px; font-size: 1.1rem; color: var(--primary); margin: 15px 0; font-weight:bold;">
                Ø§Ø¶ØºØ· Ù„Ù„ØªØ¯ÙˆÙŠØ±
            </div>
            <button class="action-btn" id="spin-btn" onclick="spinWheel()">ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¹Ø¬Ù„Ø© âœ¨</button>
        </div>

        <div id="mod-cards" class="module">
            <h2 style="color:var(--text-main);">ÙƒØ±ÙˆØª Ø§Ù„ØµØ±Ø§Ø­Ø© ÙˆØ§Ù„Ø¬Ø±Ø£Ø©</h2>
            
            <div class="level-selector">
                <button class="lvl-btn active" id="lvl1-btn" onclick="setLevel(1)">Ø§Ù„Ø¯Ø§ÙØ¦ ğŸ§¸</button>
                <button class="lvl-btn locked" id="lvl2-btn" onclick="setLevel(2)">Ø§Ù„Ø³Ø§Ø®Ù† ğŸ”¥</button>
                <button class="lvl-btn locked" id="lvl3-btn" onclick="setLevel(3)">Ø§Ù„Ø¹Ù…ÙŠÙ‚ ğŸ«¦</button>
            </div>
            
            <div class="card-display">
                <div class="card-type" id="card-type">Ø§Ù„Ø¯ÙˆØ± Ø¹Ù„Ù‰: <span class="current-player-name">Ø£Ø­Ù…Ø¯</span></div>
                <div class="card-text" id="card-text">Ø§Ø³Ø­Ø¨ ÙƒØ§Ø±Øª ÙˆØ§ÙƒØ³Ø¨ Ù†Ù‚Ø·!</div>
            </div>

            <div class="action-row">
                <button class="action-btn" style="background:linear-gradient(45deg, #a8e6cf, #1de9b6); color:#004d40;" onclick="drawCard('truth')">ØµØ±Ø§Ø­Ø© ğŸ¤”</button>
                <button class="action-btn" onclick="drawCard('dare')">Ø¬Ø±Ø£Ø© ğŸ”¥</button>
            </div>
            <button class="joker-btn" onclick="useJoker()">ğŸƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¬ÙˆÙƒØ±</button>
        </div>

        <div id="mod-dice" class="module">
            <h2 style="color:var(--text-main);">Ù†Ø±Ø¯ Ø§Ù„Ø­ÙˆØ§Ø³</h2>
            <p style="color:var(--text-light); font-size:0.9rem;">Ø¯Ø¹ Ø§Ù„ØµØ¯ÙØ© ØªÙ‚Ø±Ø± Ù„Ù…Ø³ØªÙƒ Ø§Ù„ØªØ§Ù„ÙŠØ©</p>
            
            <div class="dice-area">
                <div id="die-action" class="die">ÙØ¹Ù„</div>
                <div id="die-body" class="die">Ù…ÙƒØ§Ù†</div>
            </div>
            <button class="action-btn" id="dice-btn" onclick="rollDice()">Ø§Ø±Ù…ÙŠ Ø§Ù„Ù†Ø±Ø¯ ğŸ²</button>
        </div>
    </main>

    <nav>
        <button class="nav-btn active" onclick="switchTab('wheel', this)">ğŸ¡</button>
        <button class="nav-btn" onclick="switchTab('cards', this)">ğŸ’Œ</button>
        <button class="nav-btn" onclick="switchTab('dice', this)">ğŸ²</button>
    </nav>

    <div class="modal-overlay" id="helpModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø© ğŸ“–</div>
                <button class="close-btn" onclick="closeHelp()">âœ•</button>
            </div>
            <div class="rule-block">
                <div class="rule-title">ğŸ”„ Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø¯ÙˆØ§Ø±</div>
                <div class="rule-desc">Ø§Ù„Ù†Ù‚Ø§Ø· ØªØ¶Ø§Ù ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù„Ù„Ø´Ø®Øµ Ø§Ù„Ø°ÙŠ Ø¹Ù„ÙŠÙ‡ "Ø§Ù„Ø¯ÙˆØ±". ÙŠÙ…ÙƒÙ†Ùƒ Ø±Ø¤ÙŠØ© Ø¹Ù„Ø§Ù…Ø© "Ø§Ù„Ø¯ÙˆØ± Ø¹Ù„ÙŠÙƒ" ØªØ­Øª Ø§Ø³Ù…Ùƒ.</div>
            </div>
            <div class="rule-block">
                <div class="rule-title">ğŸ¯ Ø§Ø­ØªØ³Ø§Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·</div>
                <div class="rule-desc">
                    - Ø§Ù„Ø¹Ø¬Ù„Ø© ÙˆØ§Ù„Ù†Ø±Ø¯: 10 Ù†Ù‚Ø§Ø·.<br>
                    - Ø§Ù„ÙƒØ±ÙˆØª: Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ (15 / 30 / 50).<br>
                    * Ù…Ù„Ø­ÙˆØ¸Ø©: ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ù…Ø±Ø¨Ø¹ Ø§Ù„Ù†Ù‚Ø§Ø· Ù„Ø²ÙŠØ§Ø¯ØªÙ‡ ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø¥Ø°Ø§ Ø­Ø¯Ø« Ø®Ø·Ø£.
                </div>
            </div>
            <div class="rule-block">
                <div class="rule-title">ğŸ”“ ÙØªØ­ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª</div>
                <div class="rule-desc">Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª ØªÙØªØ­ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù…Ø¬Ù…ÙˆØ¹ Ù†Ù‚Ø§Ø·ÙƒÙ… Ø£Ù†ØªÙ… Ø§Ù„Ø§Ø«Ù†ÙŠÙ† (ØªØ¹Ø§ÙˆÙ†ÙŠ).</div>
            </div>
        </div>
    </div>

    <script>
        // --- DATA BANK ---
        const data = {
            wheel: [
                {t: "Ø¨ÙˆØ³Ø© Ø±Ù‚ÙŠÙ‚Ø© Ø¹Ø§Ù„Ø¬Ø¨ÙŠÙ†", safe: true}, {t: "ØºÙ…Ø²Ø© Ù…Ø¹ Ø§Ø¨ØªØ³Ø§Ù…Ø©", safe: true}, {t: "Ù‚ÙˆÙ„ Ø¨Ø­Ø¨Ùƒ Ø¨ØµÙˆØª Ø¹Ø§Ù„ÙŠ", safe: true},
                {t: "Ù†Ø¸Ø±Ø© Ø¹ÙŠÙ† ÙÙŠ Ø¹ÙŠÙ† (10 Ø«)", safe: true}, {t: "Ø­Ø¶Ù† Ø³Ø±ÙŠØ¹ (Ø®Ø·Ù)", safe: true}, {t: "Ù‚Ø±ØµØ© Ø®ÙÙŠÙØ© Ù…Ù† Ø§Ù„Ø®Ø¯", safe: true},
                {t: "Ù„Ø¹Ø¨ ÙÙŠ Ø§Ù„Ø´Ø¹Ø± (Ù†Øµ Ø¯Ù‚ÙŠÙ‚Ø©)", safe: true}, {t: "Ø³ÙŠÙ„ÙÙŠ Ø¨ÙˆØ´ Ø¨ÙŠØ¶Ø­Ùƒ", safe: true}, {t: "Ø§Ù…Ø³Ùƒ Ø§ÙŠØ¯ÙŠ ÙˆØ¨ÙˆØ³Ù‡Ø§", safe: true},
                {t: "Ù…Ø³Ø§Ø¬ Ù„Ù„Ø±Ø¬Ù„ÙŠÙ† (3 Ø¯Ù‚Ø§ÙŠÙ‚)", safe: true}, {t: "Ù‡Ø±Ø´ ÙÙŠ Ø§Ù„Ø´Ø¹Ø± (Ø¯Ù‚ÙŠÙ‚Ø©)", safe: true}, {t: "ØªØ­Ø¶ÙŠØ± Ù…Ø´Ø±ÙˆØ¨ Ø¯Ø§ÙÙŠ Ø­Ø§Ù„Ø§", safe: true},
                {t: "Ø¨ÙˆØ³Ø© ØªÙ‚Ø¯ÙŠØ± Ù„Ø¨Ø·Ù† Ø§Ù„ÙŠØ¯", safe: true}, {t: "Ù…Ø³Ø§Ø¬ Ù„Ù„Ø±Ù‚Ø¨Ø© ÙˆØ§Ù„ÙƒØªØ§Ù", safe: true}, {t: "ØºØ³ÙŠÙ„ Ù„Ù„ÙˆØ´ (ÙÙˆØ·Ø© Ø¯Ø§ÙÙŠØ©)", safe: true},
                {t: "Ø¬Ù…ÙˆØ¯ ØªØ§Ù… (Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„Ø­Ø±ÙƒØ© Ø¯Ù‚ÙŠÙ‚Ø©)", safe: false}, {t: "ÙˆØ¶Ø¹ Ø§Ù„Ø·Ø§Ø¹Ø© (Ø£Ù†Øª ØªØ®ØªØ§Ø±Ù‡)", safe: false}, {t: "ØºÙ…ÙŠØ¶Ø© Ù„Ù„Ø¹ÙŠÙ† (Ø¬ÙˆÙ„Ø© ÙƒØ§Ù…Ù„Ø©)", safe: false},
                {t: "Ø¨ÙˆØ³Ø© ÙˆÙ…Øµ Ù„Ù„Ø±Ù‚Ø¨Ø©", safe: false}, {t: "Ø§Ø®ØªÙŠØ§Ø± Ù‚Ø·Ø¹Ø© Ù…Ù„Ø§Ø¨Ø³ Ù„Ù„Ø®Ù„Ø¹/Ø§Ù„Ù„Ø¨Ø³", safe: false}, {t: "Ø§Ø³ØªØ³Ù„Ø§Ù… ÙƒØ§Ù…Ù„ Ù„Ù„Ø£ÙˆØ§Ù…Ø± (Ø¯Ù‚ÙŠÙ‚ØªÙŠÙ†)", safe: false},
                {t: "ÙƒØ´Ù Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„Ø¬Ø³Ù… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)", safe: false}, {t: "Ø¹Ø¶Ø© Ø®ÙÙŠÙØ© ÙÙŠ Ø§Ù„Ø´ÙØ©", safe: false}, {t: "Ø§Ø³ØªØ®Ø¯Ø§Ù… (Ø§Ù„ÙÙˆØ·Ø©/Ø§Ù„Ù…Ø®Ø¯Ø©) ÙÙˆØ±Ø§Ù‹", safe: false},
                {t: "Ù„Ø­Ø³ Ø´Ø­Ù…Ø© Ø§Ù„Ø£Ø°Ù†", safe: false}, {t: "ØªØ«Ø¨ÙŠØª Ø§Ù„ÙŠØ¯ÙŠÙ† (Ø¯Ù‚ÙŠÙ‚Ø©)", safe: false}, {t: "Ù‡Ù…Ø³Ø© Ø¬Ø±ÙŠØ¦Ø© ÙÙŠ Ø§Ù„ÙˆØ¯Ù†", safe: false}
            ],
            lvl1: {
                truth: [
                    "Ø¥ÙŠÙ‡ Ø£ÙƒØªØ± Ù…ÙˆÙ‚Ù Ø­Ø³ÙŠØª ÙÙŠÙ‡ Ø¥Ù†ÙŠ Ø³Ù†Ø¯Ùƒ Ø¨Ø¬Ø¯ØŸ", "ÙˆØµÙ Ù„Ø£ÙˆÙ„ Ù…Ø±Ø© Ø´ÙØªÙŠÙ†ÙŠ ÙÙŠÙ‡Ø§ØŒ Ø­Ø³ÙŠØªÙŠ Ø¨Ø¥ÙŠÙ‡ØŸ", "Ù„Ùˆ Ù‡Ù†Ø³Ø§ÙØ± Ù…ÙƒØ§Ù† Ù„ÙˆØ­Ø¯Ù†Ø§ Ø¯Ù„ÙˆÙ‚ØªÙŠØŒ ØªØ®ØªØ§Ø±ÙŠ ÙÙŠÙ† ÙˆÙ„ÙŠÙ‡ØŸ",
                    "Ø¥ÙŠÙ‡ Ø£ÙƒØªØ± Ù„Ø¨Ø³ Ø¨ØªÙ„Ø¨Ø³Ù‡ ÙˆØ¨ØªØ­Ø³ Ø¥Ù†Ùƒ Ù…Ù„ÙƒØ© ÙÙŠÙ‡ØŸ", "Ø­Ø§Ø¬Ø© ÙÙŠ Ø´ÙƒÙ„ÙŠ Ø£Ùˆ Ø¬Ø³Ù…ÙŠ Ø¨ØªØ¹Ø¬Ø¨Ùƒ Ø¨Ø³ Ø¨ØªØªÙƒØ³Ù ØªÙ‚ÙˆÙ„Ù‡Ø§ØŸ", "Ø¥ÙŠÙ‡ Ø§Ù„Ø£ÙƒÙ„Ø© Ø§Ù„Ù„ÙŠ Ù†ÙØ³Ùƒ ØªØ£ÙƒÙ„Ù‡Ø§ Ù…Ù† Ø¥ÙŠØ¯ÙŠ Ø¯Ù„ÙˆÙ‚ØªÙŠØŸ",
                    "Ù…ÙˆÙ‚Ù Ø¶Ø­ÙƒÙ†Ø§ ÙÙŠÙ‡ Ø³ÙˆØ§ Ù…Ù† Ù‚Ù„Ø¨Ù†Ø§ ÙˆÙ…Ø´ Ù†Ø§Ø³ÙŠÙ‡ØŸ", "ØµÙØ© ÙÙŠØ§ Ø¨ØªØ®Ù„ÙŠÙƒ ØªØ­Ø³ Ø¨Ø§Ù„Ø£Ù…Ø§Ù†ØŸ", "Ø£ØºÙ†ÙŠØ© Ø¨ØªÙÙƒØ±Ùƒ Ø¨ÙŠØ§ Ø£ÙˆÙ„ Ù…Ø§ ØªØ³Ù…Ø¹Ù‡Ø§ØŸ",
                    "Ù„Ùˆ Ù„ÙŠÙƒ Ø£Ù…Ù†ÙŠØ© ÙˆØ§Ø­Ø¯Ø© Ù„Ù„Ø¨ÙŠØª Ø¨ØªØ§Ø¹Ù†Ø§ØŒ Ù‡ØªÙƒÙˆÙ† Ø¥ÙŠÙ‡ØŸ", "Ù…ÙŠÙ† ÙÙŠÙ†Ø§ Ø¨ÙŠØµØ§Ù„Ø­ Ø§Ù„ØªØ§Ù†ÙŠ Ø£Ø³Ø±Ø¹ØŸ", "Ø¥ÙŠÙ‡ Ø£ÙƒØªØ± ÙˆÙ‚Øª ÙÙŠ Ø§Ù„ÙŠÙˆÙ… Ø¨ØªØ­Ø¨ Ù†ÙƒÙˆÙ† ÙÙŠÙ‡ Ø³ÙˆØ§ØŸ",
                    "Ø£ÙƒØªØ± ÙƒÙ„Ù…Ø© Ø¯Ù„Ø¹ Ø¨ØªØ­Ø¨ Ø£Ù‚ÙˆÙ„Ù‡Ø§Ù„ÙƒØŸ", "Ù„Ùˆ Ø­ÙŠØ§ØªÙ†Ø§ ÙÙŠÙ„Ù…ØŒ Ù‡ÙŠÙƒÙˆÙ† Ù†ÙˆØ¹Ù‡ Ø¥ÙŠÙ‡ØŸ", "Ø£Ø­Ù„Ù‰ Ù…Ø¬Ø§Ù…Ù„Ø© Ø³Ù…Ø¹ØªÙ‡Ø§ Ù…Ù†ÙŠØŸ"
                ],
                dare: [
                    "Ø­Ø¶Ù† Ù‚ÙˆÙŠ Ø¬Ø¯Ø§Ù‹ (Ø¹ØµØ±Ø©) Ù„Ù…Ø¯Ø© Ø¯Ù‚ÙŠÙ‚Ø©.", "Ø±Ù‚ØµØ© Ø³Ù„Ùˆ Ù‡Ø§Ø¯ÙŠØ© Ø¹Ù„Ù‰ Ø£ØºÙ†ÙŠØ© (Ø¨Ø¯ÙˆÙ† ÙƒÙ„Ø§Ù…).", "ØµÙˆØ±Ø© Ø³ÙŠÙ„ÙÙŠ Ù„ÙŠÙ†Ø§ Ø¨ÙˆØ´ Ø¨ÙŠØ¶Ø­Ùƒ.",
                    "Ù‡Ù…Ø³Ø© ÙÙŠ Ø§Ù„ÙˆØ¯Ù† Ø¨ÙƒÙ„Ù…Ø© Ø­Ù„ÙˆØ©.", "Ø´ÙŠÙ„Ù†ÙŠ (Ø£Ùˆ Ø­Ø§ÙˆÙ„ ØªØ´ÙŠÙ„Ù†ÙŠ) Ù„Ø«ÙˆØ§Ù†ÙŠ.", "Ø£ÙƒÙ„Ù†ÙŠ Ù‚Ø·Ø¹Ø© ÙØ§ÙƒÙ‡Ø© Ø£Ùˆ Ø´ÙŠÙƒÙˆÙ„Ø§ØªØ© ÙÙŠ Ø¨Ù‚ÙŠ.",
                    "Ø³Ø±Ø­ Ø´Ø¹Ø±ÙŠ Ø¨Ø¥ÙŠØ¯Ùƒ Ù„Ù…Ø¯Ø© Ø¯Ù‚ÙŠÙ‚Ø©.", "Ù‚Ù„Ø¯ Ø·Ø±ÙŠÙ‚Ø© ÙƒÙ„Ø§Ù…ÙŠ ÙÙŠ Ù…ÙˆÙ‚Ù Ù…Ø¹ÙŠÙ†.", "ØºÙ…Ø¶ Ø¹ÙŠÙ†Ùƒ ÙˆØ®Ù…Ù† Ø£Ù†Ø§ Ø¨Ù„Ù…Ø³ ÙÙŠÙ†.",
                    "Ø¨ÙˆØ³Ø© Ø³Ø±ÙŠØ¹Ø© Ø¹Ù„Ù‰ Ø·Ø±Ù Ø§Ù„Ø£Ù†Ù.", "Ø§Ø¹Ù…Ù„ÙŠ Ù…Ø³Ø§Ø¬ Ù„Ø±Ø§Ø³ÙŠ ÙˆØ£Ù†Ø§ Ù†Ø§ÙŠÙ… Ø¹Ù„Ù‰ Ø±Ø¬Ù„Ùƒ.", "ØºÙ†ÙŠÙ„ÙŠ Ù…Ù‚Ø·Ø¹ Ù…Ù† Ø£ØºÙ†ÙŠØ© Ø¨ØªØ­Ø¨ÙŠÙ‡Ø§."
                ]
            },
            lvl2: {
                truth: [
                    "Ø¥ÙŠÙ‡ Ø£ÙƒØªØ± Ù…Ù†Ø·Ù‚Ø© ÙÙŠ Ø¬Ø³Ù…Ùƒ Ø¨ØªØ­Ø¨Ù†ÙŠ Ø£Ù„Ù…Ø³Ù‡Ø§ØŸ", "Ø¥ÙŠÙ‡ Ø£ÙƒØªØ± Ø­Ø§Ø¬Ø© Ø¨Ø¹Ù…Ù„Ù‡Ø§ Ø¨ØªØ®Ù„ÙŠ Ø¬Ø³Ù…Ùƒ ÙŠÙ‚Ø´Ø¹Ø±ØŸ", "Ø¨ØªÙØ¶Ù„ Ø§Ù„Ù„Ù…Ø³ Ø§Ù„Ù‡Ø§Ø¯ÙŠ ÙˆÙ„Ø§ Ø§Ù„Ø¶ØºØ· Ø§Ù„Ù‚ÙˆÙŠ ÙÙŠ Ø§Ù„Ù…Ø³Ø§Ø¬ØŸ",
                    "ÙˆØµÙ Ù„Ø´Ø¹ÙˆØ±Ùƒ Ù„Ù…Ø§ Ø¨ÙƒÙˆÙ† Ù‚Ø±ÙŠØ¨ Ù…Ù†Ùƒ Ø£ÙˆÙŠØŸ", "Ø¥ÙŠÙ‡ Ø§Ù„Ù„Ø¨Ø³ Ø§Ù„Ù„ÙŠ Ù†ÙØ³Ùƒ ØªØ´ÙˆÙÙ†ÙŠ Ø¨ÙŠÙ‡ØŸ", "Ø­Ø±ÙƒØ© Ø¹Ù…Ù„ØªÙ‡Ø§ Ù…Ø¹Ø§Ùƒ Ù‚Ø¨Ù„ ÙƒØ¯Ø§ ÙˆØ¬Ù†Ù†ØªÙƒØŸ",
                    "Ø¥ÙŠÙ‡ Ø±Ø£ÙŠÙƒ ÙÙŠ (Ø±ÙŠØ­Ø© Ø¬Ø³Ù…ÙŠ/Ø¨Ø±ÙØ§Ù†ÙŠ) Ø¯Ù„ÙˆÙ‚ØªÙŠØŸ", "Ø¨ØªØªØ®ÙŠÙ„ Ø¥ÙŠÙ‡ Ù„Ù…Ø§ Ø¨ÙƒÙˆÙ† Ø¨Ø¹ÙŠØ¯ Ø¹Ù†Ùƒ ÙˆØ¨ÙƒÙ„Ù…ÙƒØŸ", "Ø¬Ø²Ø¡ ÙÙŠ Ø¬Ø³Ù…ÙŠ Ø¨ÙŠØ´Ø¯ Ù†Ø¸Ø±Ùƒ Ø¯Ø§ÙŠÙ…Ø§ØŸ",
                    "Ø¨ØªØ­Ø¨ÙŠ ØªØ´ÙˆÙÙŠÙ†ÙŠ Ø¨Ù‚Ù…ÙŠØµ ÙˆÙ„Ø§ ØªÙŠØ´Ø±Øª Ø£ÙƒØªØ±ØŸ", "Ø¥ÙŠÙ‡ Ø£ÙƒØªØ± ÙˆØ¶Ø¹ÙŠØ© ÙÙŠ Ø§Ù„Ù†ÙˆÙ… Ø¨ØªØ±ÙŠØ­Ùƒ Ø¬Ù†Ø¨ÙŠØŸ", "Ù‡Ù„ Ø¨ØªØ­Ø¨ÙŠ Ø¥Ø­Ø³Ø§Ø³ Ø§Ù„Ø²ÙŠØª Ø§Ù„Ø¯Ø§ÙÙŠ Ø¹Ù„Ù‰ Ø¬Ø³Ù…ÙƒØŸ"
                ],
                dare: [
                    "Ù…Ø³Ø§Ø¬ Ù„Ù„Ø¶Ù‡Ø± Ø¨Ø²ÙŠØª Ø¯Ø§ÙÙŠ (5 Ø¯Ù‚Ø§ÙŠÙ‚).", "Ø®Ù„Ø¹ Ù‚Ø·Ø¹Ø© Ù…Ù„Ø§Ø¨Ø³ Ø®Ø§Ø±Ø¬ÙŠØ© Ø¨Ø¨Ø·Ø¡.", "Ø¨ÙˆØ³Ø© Ø·ÙˆÙŠÙ„Ø© ÙˆØ¹Ù…ÙŠÙ‚Ø© (French Kiss).",
                    "ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø£Ù†Ù Ø¹Ù„Ù‰ Ø§Ù„Ø±Ù‚Ø¨Ø© ÙˆØ§Ø³ØªÙ†Ø´Ø§Ù‚ Ø§Ù„Ø±ÙŠØ­Ø© Ø¨Ù‚ÙˆØ©.", "Ù„Ù…Ø³ (Ø¨Ø§Ø·Ù† Ø§Ù„ÙŠØ¯) Ø¨Ø·Ø±Ù Ø§Ù„Ù„Ø³Ø§Ù†.", "Ø¹Ø¶Ø© Ø®ÙÙŠÙØ© ÙÙŠ Ø§Ù„Ø´ÙØ© Ø§Ù„Ø³ÙÙ„ÙŠØ©.",
                    "Ø§Ù„Ø¬Ù„ÙˆØ³ ÙÙŠ Ø­Ø¶Ù† Ø§Ù„Ø´Ø±ÙŠÙƒ (Face to Face).", "ÙÙƒ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù‚Ù…ÙŠØµ/Ø§Ù„Ø¨ÙŠØ¬Ø§Ù…Ø§ Ù„Ù„Ø´Ø±ÙŠÙƒ.", "ØªÙ…Ø±ÙŠØ± Ø§Ù„ÙŠØ¯ Ø¹Ù„Ù‰ Ø§Ù„ÙØ®Ø° Ù…Ù† Ø§Ù„Ø¯Ø§Ø®Ù„ (ÙÙˆÙ‚ Ø§Ù„Ù‡Ø¯ÙˆÙ…).",
                    "ØªØ³Ø¨ÙŠÙ„ Ù„Ù„Ù†Ø¸Ø± ÙÙŠ Ø§Ù„Ø¹ÙŠÙ† Ù„Ù…Ø¯Ø© Ø¯Ù‚ÙŠÙ‚Ø© ØµÙ…Øª.", "Ø§Ø±ÙØ¹ÙŠ Ø´Ø¹Ø±Ùƒ Ù„ÙÙˆÙ‚ ÙˆÙˆØ±ÙŠÙ†ÙŠ Ø±Ù‚Ø¨ØªÙƒ.", "Ø¨ÙˆØ³Ø© Ø±Ù‚ÙŠÙ‚Ø© Ø®Ù„Ù Ø§Ù„Ø£Ø°Ù†."
                ]
            },
            lvl3: {
                truth: [
                    "Ø¥ÙŠÙ‡ Ø£ÙƒØªØ± Ø®ÙŠØ§Ù„ Ù†ÙØ³Ùƒ ØªØ­Ù‚Ù‚Ù‡ Ø¨Ø³ Ù…ÙƒØ³ÙˆÙ ØªØ·Ù„Ø¨Ù‡ØŸ", "Ø¥Ø­Ø³Ø§Ø³Ùƒ Ø¥ÙŠÙ‡ Ù„Ù…Ø§ Ø¨ØªØ­Ø³ Ø¥Ù†ÙŠ Ù…Ø³ÙŠØ·Ø± Ø¹Ù„ÙŠÙƒ ÙƒÙ„ÙƒØŸ", "Ø¨ØªÙÙƒØ± ÙÙŠ Ø¥ÙŠÙ‡ Ù„Ù…Ø§ Ø¨Ø·Ù„Ø¨ Ù…Ù†Ùƒ ØªØ«Ø¨Øª Ø¥ÙŠØ¯ÙƒØŸ",
                    "Ù„Ùˆ ØºÙ…ÙŠØª Ø¹ÙŠÙ†Ùƒ Ø¯Ù„ÙˆÙ‚ØªÙŠØŒ ØªØªÙ…Ù†Ù‰ Ø£Ø¹Ù…Ù„ Ø¥ÙŠÙ‡ØŸ", "Ø¥ÙŠÙ‡ Ø£ÙƒØªØ± ÙˆØ¶Ø¹ Ø¨ÙŠØ­Ø³Ø³Ùƒ Ø¥Ù†Ùƒ (Ù…Ù„ÙƒÙŠ) Ø¨Ø¬Ø¯ØŸ", "Ø´Ø¹ÙˆØ±Ùƒ Ø¥ÙŠÙ‡ ØªØ¬Ø§Ù‡ (Ø§Ù„Ù…Ø®Ø¯Ø©/Ø§Ù„ÙÙˆØ·Ø©) Ù„Ù…Ø§ Ø¨Ù†Ø³ØªØ®Ø¯Ù…Ù‡Ø§ØŸ",
                    "Ù†ÙØ³Ùƒ Ø£ÙƒÙˆÙ† Ù…ÙŠÙ† Ø§Ù„Ù†Ù‡Ø§Ø±Ø¯Ø©ØŸ (Ø´Ø®ØµÙŠØ© Ø§Ù„Ø®ÙŠØ§Ù„).", "Ø¥Ù…ØªÙ‰ Ø­Ø³ÙŠØª Ø¨Ù‚Ù…Ø© Ø§Ù„Ø¶Ø¹Ù Ø§Ù„Ù„Ø°ÙŠØ° Ø¨ÙŠÙ† Ø¥ÙŠØ¯ÙŠØ§ØŸ", "Ø¥ÙŠÙ‡ Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù„ÙŠ Ù„Ùˆ Ù‚Ù„ØªÙ‡Ø§ Ø¨ØªØ¯ÙˆØ®ÙƒØŸ",
                    "Ù‡Ù„ Ø¨ØªØ­Ø¨ÙŠ Ø¥Ø­Ø³Ø§Ø³ (Ø§Ù„Ø§Ù…ØªÙ„Ø§Ø¡) ÙˆØ§Ù„Ø¶ØºØ·ØŸ", "Ù‡Ù„ Ø¨ØªØ³ØªÙ…ØªØ¹ÙŠ Ù„Ù…Ø§ Ø¨ÙƒÙˆÙ† (Ø¹Ù†ÙŠÙ Ø¨Ø­Ù†ÙŠØ©)ØŸ", "Ø´Ø¹ÙˆØ±Ùƒ Ø¥ÙŠÙ‡ Ù„Ù…Ø§ Ø¨ÙƒÙ„Ù…Ùƒ Ø¨ØµÙŠØºØ© Ø§Ù„Ø£Ù…Ø±ØŸ"
                ],
                dare: [
                    "Ø§Ø³ØªØ³Ù„Ø§Ù… ØªØ§Ù…: Ø§Ù„Ø´Ø±ÙŠÙƒ ÙŠØªØ­ÙƒÙ… ÙÙŠ Ø­Ø±ÙƒØªÙƒ ÙˆÙˆØ¶Ø¹Ùƒ Ù„Ù…Ø¯Ø© 5 Ø¯Ù‚Ø§ÙŠÙ‚.", "ÙˆØ¶Ø¹ (Ø§Ù„ÙØ±Ø§Ø´Ø© Ø§Ù„Ù…ØµÙ„ÙˆØ¨Ø©) Ø£Ùˆ Ø£ÙŠ ÙˆØ¶Ø¹ ÙŠØ®ØªØ§Ø±Ù‡ Ø§Ù„Ø´Ø±ÙŠÙƒ ÙÙˆØ±Ø§Ù‹.",
                    "Ø§Ø³ØªØ®Ø¯Ø§Ù… (Ø§Ù„ÙÙˆØ·Ø© Ø§Ù„Ù…Ø¨Ø±ÙˆÙ…Ø©/Ø§Ù„Ù…Ø®Ø¯Ø©) ØªØ­Øª Ø§Ù„Ø­ÙˆØ¶ Ø¨Ø¶ØºØ·.", "ØºÙ…ÙŠØ¶Ø© Ù„Ù„Ø¹ÙŠÙ† (Ø¨Ø´Ø±ÙŠØ·Ø©/Ø·Ø±Ø­Ø©) ÙˆÙ„Ù…Ø³ Ø­Ø³ÙŠ Ø¨Ø¯ÙˆÙ† Ø±Ø¤ÙŠØ©.",
                    "ØªØ«Ø¨ÙŠØª Ø§Ù„ÙŠØ¯ÙŠÙ† Ø®Ù„Ù Ø§Ù„Ø¸Ù‡Ø± (Ø£Ùˆ ÙÙˆÙ‚ Ø§Ù„Ø±Ø£Ø³) Ø¨ÙŠØ¯ Ø§Ù„Ø´Ø±ÙŠÙƒ.", "Ù„Ø­Ø³ Ø£Ùˆ Ù…Øµ Ù…Ù†Ø·Ù‚Ø© ÙŠØ®ØªØ§Ø±Ù‡Ø§ Ø§Ù„Ø´Ø±ÙŠÙƒ (Ø¥Ø­Ù„ÙŠÙ„/Ø±Ù‚Ø¨Ø©/Ø£Ø°Ù†).",
                    "Ø­Ùƒ (Grinding) Ø¨Ø¶ØºØ· Ù‚ÙˆÙŠ Ø¹Ù„Ù‰ ÙØ®Ø° Ø§Ù„Ø´Ø±ÙŠÙƒ Ø£Ùˆ Ø§Ù„Ù…Ø®Ø¯Ø©.", "Ø§Ù„Ù‚ÙŠØ§Ù… Ø¨Ø¯ÙˆØ± (Ø§Ù„Ø¯Ù…ÙŠØ© Ø§Ù„ØµØ§Ù…ØªØ©) - Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„ÙƒÙ„Ø§Ù… Ø£Ùˆ Ø§Ù„Ø­Ø±ÙƒØ©.",
                    "Ù…Ø³Ø§Ø¬ Ø¹Ù…ÙŠÙ‚ Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ø§Ù†Ø©/Ø§Ù„Ù…Ø¤Ø®Ø±Ø©.", "ØªÙ†ÙÙŠØ° (Ø®ÙŠØ§Ù„) ÙŠÙ‡Ù…Ø³ Ø¨Ù‡ Ø§Ù„Ø´Ø±ÙŠÙƒ ÙÙŠ Ø£Ø°Ù†Ùƒ Ø­Ø§Ù„Ø§Ù‹."
                ]
            },
            dice: {
                actions: ["Ø¨ÙˆØ³", "Ø§Ù„Ù…Ø³ Ø¨Ø¶ØºØ·", "Ø§Ø¹ØµØ±/Ø§Ø¯Ø¹Ùƒ", "Ø§Ù†ÙØ® Ø¯Ø§ÙÙŠ", "Ø§Ù„Ø­Ø³", "Ø¹Ø¶ Ø¨Ø±ÙÙ‚", "Ø´Ù… Ø¨Ø¹Ù…Ù‚", "Ø¯Ù„Ùƒ Ø¨Ø¨Ø·Ø¡", "Ù‚Ø±Øµ Ø®ÙÙŠÙ", "Ø­Ùƒ (Grind)", "Ø®Ø±Ø¨Ø´ Ø¶ÙˆØ§ÙØ±", "Ø´Ø¯ Ø¨Ø±ÙÙ‚"],
                parts: ["Ø§Ù„Ø±Ù‚Ø¨Ø©", "Ø´Ø­Ù…Ø© Ø§Ù„Ø£Ø°Ù†", "Ø¨Ø§Ø·Ù† Ø§Ù„ÙŠØ¯", "Ø§Ù„ÙØ®Ø° Ù…Ù† Ø¬ÙˆÙ‡", "Ø§Ù„Ø´ÙØ§ÙŠÙ", "Ø£Ø³ÙÙ„ Ø§Ù„Ø¸Ù‡Ø±", "Ø§Ù„Ø­Ù„Ù…Ø©/Ø§Ù„ØµØ¯Ø±", "Ø®Ù„Ù Ø§Ù„Ø±ÙƒØ¨Ø©", "Ø§Ù„Ø¹Ø§Ù†Ø©/Ø£Ø³ÙÙ„ Ø§Ù„Ø¨Ø·Ù†", "Ø¨Ø§Ø·Ù† Ø§Ù„Ø°Ø±Ø§Ø¹", "Ø§Ù„ÙƒØªÙ", "Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù†Ø¨Ø¶"]
            }
        };

        // --- STATE ---
        let state = {
            safeMode: false,
            score1: 0,
            score2: 0,
            currentLevel: 1,
            currentPlayer: 1 // 1 for Ahmed, 2 for Lulu
        };

        // --- LOGIC ---
        function toggleMode() {
            state.safeMode = document.getElementById('modeToggle').checked;
            updateUIForMode();
        }

        function updateUIForMode() {
            document.getElementById('lvl2-btn').style.display = state.safeMode ? 'none' : 'block';
            document.getElementById('lvl3-btn').style.display = state.safeMode ? 'none' : 'block';
            if (state.safeMode && state.currentLevel > 1) setLevel(1);
        }

        function switchTab(tabId, btn) {
            document.querySelectorAll('.module').forEach(m => m.classList.remove('active'));
            document.getElementById('mod-' + tabId).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        // --- SCORING & TURNS SYSTEM (FIXED) ---
        function addScore(points) {
            let player = state.currentPlayer;
            state['score' + player] += points;
            
            // Animation for score
            let scoreEl = document.getElementById('score' + player);
            scoreEl.innerText = state['score' + player];
            scoreEl.style.transform = "scale(1.5)";
            setTimeout(()=> scoreEl.style.transform = "scale(1)", 200);

            checkUnlocks();
        }

        function manualAdd(player) {
            // Allows fixing score by clicking
            state['score' + player] += 5;
            document.getElementById('score' + player).innerText = state['score' + player];
            checkUnlocks();
        }

        function switchTurn() {
            state.currentPlayer = state.currentPlayer === 1 ? 2 : 1;
            updateTurnUI();
        }

        function updateTurnUI() {
            // Remove active class from both
            document.getElementById('box-p1').classList.remove('active-turn');
            document.getElementById('box-p2').classList.remove('active-turn');
            
            // Add to current
            document.getElementById('box-p' + state.currentPlayer).classList.add('active-turn');

            // Update names in modules
            let name = state.currentPlayer === 1 ? "Ø£Ø­Ù…Ø¯" : "Ù„ÙˆÙ„Ùˆ";
            document.querySelectorAll('.current-player-name').forEach(el => el.innerText = name);
        }

        function checkUnlocks() {
            let total = state.score1 + state.score2;
            let msg = document.getElementById('reward-msg');
            let lvl2Btn = document.getElementById('lvl2-btn');
            let lvl3Btn = document.getElementById('lvl3-btn');

            if (!state.safeMode) {
                if (total >= 50) lvl2Btn.classList.remove('locked');
                if (total >= 150) {
                    lvl3Btn.classList.remove('locked');
                    msg.innerText = "ğŸ† Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¹Ù…ÙŠÙ‚ Ù…ÙØªÙˆØ­!";
                }
            }
        }

        // --- GAME MODULES ---
        let isSpinning = false;
        function spinWheel() {
            if (isSpinning) return;
            isSpinning = true;
            document.getElementById('spin-btn').disabled = true;

            const resBox = document.getElementById('wheel-result');
            resBox.innerText = "...";
            
            let pool = data.wheel;
            if (state.safeMode) pool = pool.filter(i => i.safe);
            let selected = pool[Math.floor(Math.random() * pool.length)];
            
            let randomDeg = Math.floor(1000 + Math.random() * 2000); 
            let wheel = document.getElementById('wheel');
            let currentRotation = getRotation(wheel); 
            wheel.style.transform = `rotate(${currentRotation + randomDeg}deg)`;

            setTimeout(() => {
                resBox.innerText = selected.t;
                addScore(10);
                setTimeout(switchTurn, 1000); // Switch turn after 1s
                isSpinning = false;
                document.getElementById('spin-btn').disabled = false;
            }, 4000);
        }

        function getRotation(el) {
            // Helper to keep rotation cumulative
            var st = window.getComputedStyle(el, null);
            var tm = st.getPropertyValue("-webkit-transform") ||
                     st.getPropertyValue("-moz-transform") ||
                     st.getPropertyValue("-ms-transform") ||
                     st.getPropertyValue("-o-transform") ||
                     st.getPropertyValue("transform") ||
                     "none";
            if (tm != "none") {
                var values = tm.split('(')[1].split(')')[0].split(',');
                var angle = Math.round(Math.atan2(values[1],values[0]) * (180/Math.PI));
                return (angle < 0 ? angle + 360 : angle);
            }
            return 0;
        }

        function setLevel(lvl) {
            let btn = document.getElementById('lvl' + lvl + '-btn');
            if (btn.classList.contains('locked') && !state.safeMode) {
                alert("ğŸ”’ Ù„Ø³Ù‡ Ø¨Ø¯Ø±ÙŠ! Ø¬Ù…Ø¹ÙˆØ§ Ù†Ù‚Ø§Ø· Ø£ÙƒØªØ±.");
                return;
            }
            state.currentLevel = lvl;
            document.querySelectorAll('.lvl-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function drawCard(type) {
            let lvlKey = 'lvl' + state.currentLevel;
            let pool = data[lvlKey][type];
            let card = pool[Math.floor(Math.random() * pool.length)];
            
            // Animation effect
            let textDiv = document.getElementById('card-text');
            textDiv.style.opacity = 0;
            setTimeout(() => {
                document.getElementById('card-type').innerText = type === 'truth' ? 'Ø³Ø¤Ø§Ù„ ØµØ±Ø§Ø­Ø©' : 'Ø­ÙƒÙ… Ø¬Ø±Ø£Ø©';
                textDiv.innerText = card;
                textDiv.style.opacity = 1;
                
                // Scoring
                let points = state.currentLevel === 1 ? 15 : (state.currentLevel === 2 ? 30 : 50);
                addScore(points);
                switchTurn();
            }, 300);
        }

        function useJoker() {
            document.getElementById('card-text').innerText = "ğŸƒ ÙƒØ§Ø±Øª Ø§Ù„Ø¬ÙˆÙƒØ±! \n ØªÙ… Ø§Ù„Ø¹ÙÙˆ Ø¹Ù†Ùƒ. \n (Ø¨ÙˆØ³Ø© + Ø­ÙƒÙ… Ø¬Ø¯ÙŠØ¯)";
        }

        function rollDice() {
            let btn = document.getElementById('dice-btn');
            btn.disabled = true;
            let dieA = document.getElementById('die-action');
            let dieB = document.getElementById('die-body');
            
            dieA.classList.add('shake'); dieB.classList.add('shake');
            
            setTimeout(() => {
                dieA.classList.remove('shake'); dieB.classList.remove('shake');
                
                let safeFilterActions = ["Ø¹Ø¶", "Ø§Ù„Ø­Ø³", "Ø­Ùƒ", "Ø§Ø¹ØµØ±"];
                let safeFilterParts = ["Ø§Ù„Ø¹Ø§Ù†Ø©", "Ø§Ù„Ø­Ù„Ù…Ø©", "Ø§Ù„ÙØ®Ø°", "Ø§Ù„Ù…Ø¤Ø®Ø±Ø©"];
                let actions = data.dice.actions;
                let parts = data.dice.parts;
                
                if (state.safeMode) {
                    actions = actions.filter(a => !safeFilterActions.some(bad => a.includes(bad)));
                    parts = parts.filter(p => !safeFilterParts.some(bad => p.includes(bad)));
                }
                
                dieA.innerText = actions[Math.floor(Math.random() * actions.length)];
                dieB.innerText = parts[Math.floor(Math.random() * parts.length)];
                
                addScore(10);
                switchTurn();
                btn.disabled = false;
            }, 500);
        }

        function openHelp() { document.getElementById('helpModal').style.display = 'flex'; }
        function closeHelp() { document.getElementById('helpModal').style.display = 'none'; }

        // SW
        if ('serviceWorker' in navigator) { navigator.serviceWorker.register('sw.js'); }

        // Init
        updateUIForMode();
    </script>
</body>
</html>
